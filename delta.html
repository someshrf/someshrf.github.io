<!DOCTYPE html>
<html>
 <head>
   <title>notes</title>
 </head>

 <style>
 	
 </style>

 <body.onload="loading()">
 <textarea id="tt" placeholder="enter message" rows="2" cols="80"></textarea>
 <textarea id="nn" placeholder="1 for high 2 for med 3 for low" rows="2" cols="9"></textarea>
 <button type="button" onclick="addnote()">add note</button>
 <textarea id="dd" placeholder="enter no of node to delete" rows="2" cols="9"></textarea>
 <button type="button" onclick="deletenote()">delete note</button>
 
 <div id="container">
 	
 </div>

  <script>

var nos=0;

function deletenote(){

var id=document.getElementById("dd").value;
document.getElementById("dd").value="";
var para = document.getElementById("note"+id);
if(para == null)
 {alert("The note does not exist");}
para.parentNode.removeChild(para);
localStorage.removeItem("prio"+id);

}

function addnote() {

 var txt=document.getElementById("tt").value; 
 document.getElementById("tt").value=""; 
 var priority=document.getElementById("nn").value;
 document.getElementById("nn").value="";
 nos=nos+1;
 
 
 var par = document.createElement("p");
 par.contentEditable="true";
 par.style.height="40px";
 
  if(priority === "1")
    par.style.backgroundColor = "red";
 else if(priority === "2")
	par.style.backgroundColor = "yellow";
 else if(priority === "3")
	par.style.backgroundColor = "green";
			
 par.setAttribute("id","note"+nos);
           
 // localStorage.setItem("no"+nos,nos);
 localStorage.setItem("number",nos);
      
 var node = document.createTextNode(txt);
 par.appendChild(node);
 
 var element = document.getElementById("container");
 element.appendChild(par);
 
localStorage.setItem("note"+nos,txt);
localStorage.setItem("prio"+nos,priority);
}	

 function loading(){
  var numb=localStorage.getItem("number");
  nos=parseInt(numb);
  var i;
  for(i=1;i<=nos;i++)
    {var txt=JSON.parse(localStorage.getItem("note"+i));
     var prio=localStorage.getItem("prio"+i);

     var par = document.createElement("p");
     par.contentEditable="true";
     par.style.height="40px";

 if(prio === "1")
      par.style.backgroundColor = "red";
 else if(prio === "2")
      par.style.backgroundColor = "yellow";
 else if(prio === "3")
      par.style.backgroundColor = "green";
 
  var node = document.createTextNode(txt);
  par.appendChild(node);
  par.setAttribute("id","note"+i);
  var element = document.getElementById("container");
  element.appendChild(par);
      
   }
 }  
  </script>
 </body>
</html>

